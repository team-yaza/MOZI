---
slug: Sentry로-모니터링-시스템-구축하기
title: Sentry로 모니터링 시스템 구축하기
authors: [hyunjin]
tags: [Sentry, MOZI]
---

## 프론트엔드 모니터링이란

프론트엔드 모니터링은 웹 사이트 또는 앱의 성능을 추적하는데 사용되는 일련의 프로세스 및 도구입니다. 프론트엔드 모니터링은 주로 사용자가 최종적으로 보는 부분에 중점을 둡니다. 여기에는 다음과 같은 문제가 포함됩니다.

<!--truncate-->

- 느린 렌더링
- 일관되지 않거나 응답하지 않는 사용자 경험
- 네트워크 요청/API 오류
- 프레임워크 관련 문제

웹 사이트가 더욱 강력해지고 복잡해짐에 따라 성능 유지 관리가 점점더 어려워지고 있습니다. 프론트엔드에서 성능은 사용자 경험의 일부입니다. 때떄로 사용자는 웹 사이트에서 처음 보고 경험한 것을 기반으을 그 기업의 품질을 평가합니다. 따라서 프론트엔드 모니터링은 견고한 웹 사이트와 앱을 개발하는데 필수적인 부분입니다.

## Sentry란?

React 프로젝트에서 Sentry를 사용하면 성능을 추적, 기록 및 모니터링할 수 있습니다.

### Sentry 연동과정

[Deploy and Monitor your Next.js Application with Vercel & Sentry](https://www.youtube.com/watch?v=ydbajDeDCsQ)

위 영상과 [공식 문서](https://docs.sentry.io/platforms/javascript/guides/nextjs/)를 참고했습니다.

### 샘플 비율(SampleRate) 정보

테스트하는 동안, `traceSampleRate`를 1.0으로 유지해도 됩니다. 이것은 브라우저에서 수행된 모든 작업이 Sentry에 트랜잭션으로 전송됨을 의미합니다.

프로덕션에서 Sentry의 트랜잭션 할당량에 도달하지 않고 균일한 샘플 데이터를 수집하려면 이 값을 낮춰야합니다. 또는 샘플 데이터를 동적으로 수집하기 위해 `traceSampler`를 사용하여 이러한 트랜잭션을 필터링할 수 있습니다.

:::note
샘플링 옵션에 대한 자세한 내용은 [여기 문서](https://docs.sentry.io/platforms/javascript/guides/react/configuration/sampling/)에서 찾을 수 있습니다.
:::

### 사용자 지정 오류 캡처

React에서 오류를 캡처하는 것 외에도 Sentry는 앱 내에서 지정된 오류를 캡처할 수 있습니다.

아래와 같이 할 수 있습니다.

```ts
import * as Sentry from "@sentry/react"

const addColor = (title, color) => {
    if (colors.some((c) => c.color === color)) {
      throw "Color already exists"; // throw 문을 추가하세요.
    } else {...}

try {
  addColor(title.value, color.value)
} catch (e) {
  Sentry.captureException(e)
  console.error(e)
}
```

![](https://blog.openreplay.com/static/85c26791a919f8279ead6996f242a1b0/c7605/img9.png)

## 성능 모니터링 활성화

오류 추적 외에도 export문에서 App 컴포넌트에 `Sentry.withProfiler()`를 감싸주어 Sentry 대시보드에 성능 모니터링을 활성화할 수 있습니다.

```ts
export default Sentry.withProfiler(App)
```

성능 탭으로 이동하여 FCP(최초로 컨텐츠를 볼 수 있는 페인트 단계), API 요청의 대기 시간 또는 중단되는 시간 등과 같은 중요한 항목을 모니터링하고 측정합니다.

![](https://blog.openreplay.com/static/21046188ffe0e9c3eb767ab4d04b0ffc/6ff63/img10.png)

## Reference

- [Sentry.io 및 React를 사용한 프런트엔드 모니터링](https://velog.io/@surim014/frontend-monitoring-with-sentry-and-react?utm_source=substack&utm_medium=email)
