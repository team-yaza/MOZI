"use strict";(self.webpackChunkmozi_docs=self.webpackChunkmozi_docs||[]).push([[5172],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var l=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,l,r=function(e,t){if(null==e)return{};var n,l,r={},a=Object.keys(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(l=0;l<a.length;l++)n=a[l],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=l.createContext({}),c=function(e){var t=l.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return l.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return l.createElement(l.Fragment,{},t)}},k=l.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),k=c(n),d=r,m=k["".concat(s,".").concat(d)]||k[d]||p[d]||a;return n?l.createElement(m,o(o({ref:t},u),{},{components:n})):l.createElement(m,o({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=k;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,o[1]=i;for(var c=2;c<a;c++)o[c]=n[c];return l.createElement.apply(null,o)}return l.createElement.apply(null,n)}k.displayName="MDXCreateElement"},3642:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>c});var l=n(7462),r=(n(7294),n(3905));const a={},o=void 0,i={permalink:"/blog/2022/08/21/Service-Worker",source:"@site/blog/2022-08-21-Service-Worker.md",title:"Service-Worker",description:"\uc11c\ube44\uc2a4 \uc6cc\ucee4\ub294 \ube0c\ub77c\uc6b0\uc800\uac00 \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \uc2e4\ud589\ud558\ub294 \uc2a4\ud06c\ub9bd\ud2b8\ub85c, \uc6f9 \ud398\uc774\uc9c0\uc640\ub294 \ubcc4\uac1c\ub85c \uc791\ub3d9\ud558\uba70 \uc6f9 \ud398\uc774\uc9c0 \ub610\ub294 \uc0ac\uc6a9\uc790\uc758 \uc778\ud130\ub799\uc158\uc774 \ud544\uc694\ud558\uc9c0 \uc54a\uc740 \uae30\ub2a5\ub9cc \uc81c\uacf5\ud558\uace0 \uc788\ub2e4.",date:"2022-08-21T00:00:00.000Z",formattedDate:"August 21, 2022",tags:[],readingTime:7.586666666666667,hasTruncateMarker:!1,authors:[],frontMatter:{},prevItem:{title:"GraphQL",permalink:"/blog/GraphQL"},nextItem:{title:"Background Sync",permalink:"/blog/background-sync"}},s={authorsImageUrls:[]},c=[{value:"\uce90\uc2dc\uc640 \uc0c1\ud638\uc791\uc6a9",id:"\uce90\uc2dc\uc640-\uc0c1\ud638\uc791\uc6a9",level:2},{value:"\ud478\uc26c \uc54c\ub9bc",id:"\ud478\uc26c-\uc54c\ub9bc",level:2},{value:"\ubc31\uadf8\ub77c\uc6b4\ub4dc \ub3d9\uae30\ud654",id:"\ubc31\uadf8\ub77c\uc6b4\ub4dc-\ub3d9\uae30\ud654",level:2},{value:"Fetch",id:"fetch",level:2},{value:"\uba54\uc2dc\uc9c0\ub97c \ud1b5\ud55c \uc11c\ube44\uc2a4 \uc6cc\ucee4\uc640 \ud398\uc774\uc9c0\uac04\uc758 \ucee4\ubba4\ub2c8\ucf00\uc774\uc158",id:"\uba54\uc2dc\uc9c0\ub97c-\ud1b5\ud55c-\uc11c\ube44\uc2a4-\uc6cc\ucee4\uc640-\ud398\uc774\uc9c0\uac04\uc758-\ucee4\ubba4\ub2c8\ucf00\uc774\uc158",level:2},{value:"LifeCycle",id:"lifecycle",level:2},{value:"Install",id:"install",level:3},{value:"Activate",id:"activate",level:3},{value:"clients claim",id:"clients-claim",level:3},{value:"\ucc38\uace0",id:"\ucc38\uace0",level:2}],u={toc:c};function p(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,l.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"\uc11c\ube44\uc2a4 \uc6cc\ucee4\ub294 \ube0c\ub77c\uc6b0\uc800\uac00 \ubc31\uadf8\ub77c\uc6b4\ub4dc\uc5d0\uc11c \uc2e4\ud589\ud558\ub294 \uc2a4\ud06c\ub9bd\ud2b8\ub85c, \uc6f9 \ud398\uc774\uc9c0\uc640\ub294 \ubcc4\uac1c\ub85c \uc791\ub3d9\ud558\uba70 \uc6f9 \ud398\uc774\uc9c0 \ub610\ub294 \uc0ac\uc6a9\uc790\uc758 \uc778\ud130\ub799\uc158\uc774 \ud544\uc694\ud558\uc9c0 \uc54a\uc740 \uae30\ub2a5\ub9cc \uc81c\uacf5\ud558\uace0 \uc788\ub2e4.\n\uc11c\ube44\uc2a4 \uc6cc\ucee4\uc758 \uc218\uba85\uc8fc\uae30\ub294 \uc6f9 \ud398\uc774\uc9c0\uc640\ub294 \uc644\uc804\ud788 \ubcc4\uac1c\uc774\ub2e4. \uc6f9 \uc11c\ube44\uc2a4\uc640 \ube0c\ub77c\uc6b0\uc800 \ubc0f \ub124\ud2b8\uc6cc\ud06c \uc0ac\uc774\uc5d0\uc11c \ud504\ub85d\uc2dc \uc11c\ubc84 \uc5ed\ud560\uc744 \ud558\uba70, \uc624\ud504\ub77c\uc778\uc5d0\uc11c\ub3c4 \uc11c\ube44\uc2a4\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub3c4\ub85d \ud55c\ub2e4."),(0,r.kt)("p",null,"\uc6f9 \ud398\uc774\uc9c0\uc640 \ubcc4\uac1c\ub85c \uc874\uc7ac\ud558\uae30 \ub54c\ubb38\uc5d0 \ub2e4\uc74c\uacfc \uac19\uc740 \uc81c\uc57d\uc774 \uc788\ub2e4."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\uc11c\ube44\uc2a4 \uc6cc\ucee4\ub294 \uc694\uccad\ud558\uc9c0 \uc54a\ub294 \uc774\uc0c1, \uc5c6\ub294 \uac83\uc774\ub098 \ub2e4\ub984\uc774 \uc5c6\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"\uc6f9 \ud398\uc774\uc9c0 life cycle\uc744 \ub530\ub974\uc9c0 \uc54a\ub294\ub2e4. \uc11c\ube44\uc2a4 \uc6cc\ucee4\ub294 \uc6f9 \ud398\uc774\uc9c0\uac00 \ub2eb\ud788\ub354\ub77c\ub3c4 \uc790\ub3d9\uc73c\ub85c \ube44\ud65c\uc131\ud654\ub418\uc9c0 \uc54a\ub294\ub2e4."),(0,r.kt)("li",{parentName:"ol"},"\uc6f9 \ud398\uc774\uc9c0\uc640 \ubcc4\uac1c\ub85c \uc874\uc790\ud574\ubbc0\ub85c DOM\uc774\ub098 window \uc694\uc18c\uc5d0 \uc811\uadfc\ud560 \uc218 \uc5c6\ub2e4.")),(0,r.kt)("h2",{id:"\uce90\uc2dc\uc640-\uc0c1\ud638\uc791\uc6a9"},"\uce90\uc2dc\uc640 \uc0c1\ud638\uc791\uc6a9"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/63354527/183283272-80e7c99f-1454-42b3-8328-e5f66b31f2dd.png",alt:"image"})),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"fetch")," \uc774\ubca4\ud2b8\uc758 \uc911\uac04\uc790 \uc5ed\ud560\ub85c \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4. \uc774 \uacbd\uc6b0 \uc11c\ube44\uc2a4 \uc6cc\ucee4\ub294 HTTP\ub97c \ud1b5\ud574 \uc815\ubcf4\ub97c \uc694\uccad\ud558\ub294 \ub300\uc2e0 \uac00\uc9c0\uace0 \uc788\ub294 \uce90\uc2dc\uc5d0\uc11c \uc790\ub8cc\ub97c \uc804\ub2ec\ud55c\ub2e4. \uce90\uc2dc\uac00 \uc0ad\uc81c\ub418\uc9c0 \uc54a\ub294 \ud55c \ube0c\ub77c\uc6b0\uc800\ub294 \uc778\ud130\ub137 \uc5f0\uacb0 \uc5c6\uc774\ub3c4 \uc815\ubcf4\ub97c \ubcf4\uc5ec\uc904 \uc218 \uc788\ub2e4."),(0,r.kt)("h2",{id:"\ud478\uc26c-\uc54c\ub9bc"},"\ud478\uc26c \uc54c\ub9bc"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/63354527/183283322-fa0ebaa3-a4f1-43d7-a9ed-c05809b08969.png",alt:"image"})),(0,r.kt)("p",null,"\ube0c\ub77c\uc6b0\uc800 \ucc3d\uc774 \ub2eb\ud78c \uc0c1\ud0dc\uc5d0\uc11c\ub3c4 \ub3d9\uc791\ud558\ubbc0\ub85c, \ud478\uc2dc \uc54c\ub9bc\uc744 \uad6c\ud604\ud560 \uc218 \uc788\ub2e4."),(0,r.kt)("h2",{id:"\ubc31\uadf8\ub77c\uc6b4\ub4dc-\ub3d9\uae30\ud654"},"\ubc31\uadf8\ub77c\uc6b4\ub4dc \ub3d9\uae30\ud654"),(0,r.kt)("p",null,(0,r.kt)("img",{parentName:"p",src:"https://user-images.githubusercontent.com/63354527/183283351-6d23a274-9257-41d6-944e-f424b4224991.png",alt:"image"})),(0,r.kt)("p",null,"\ucc44\ud305 \uba54\uc2dc\uc9c0 \ub610\ub294 \uc0ac\uc9c4 \uc5c5\ub85c\ub4dc \ub4f1\uc758 \uc791\uc5c5 \ub3c4\uc911 \ucef4\ud4e8\ud130\uac00 \uc624\ud504\ub77c\uc778 \uc0c1\ud0dc\uac00 \ub418\ub294 \uacbd\uc6b0 \uc628\ub77c\uc778 \uc0c1\ud0dc\uac00 \ub418\uc5c8\uc744 \ub54c \ud574\ub2f9 \uc791\uc5c5\uc744 \ub9c8\uc800 \uc644\ub8cc\ud560 \uc218 \uc788\ub2e4."),(0,r.kt)("h2",{id:"fetch"},"Fetch"),(0,r.kt)("p",null,"fetch\ub780 web resource\uc5d0 \uc811\uadfc\ud558\uae30 \uc704\ud574 \ud589\ud574\uc9c0\ub294 \ubaa8\ub4e0 request action\uc744 \uc758\ubbf8\ud55c\ub2e4.\nservice worker\ub294 fetch\ub97c \ud1b5\ud574 \ubc1c\uc0dd\ud558\ub294 \ubaa8\ub4e0 http request\ub97c \uc911\uac04\uc5d0\uc11c \uac00\ub85c\ucc4c \uc218 \uc788\ub2e4. (proxy)\n\uc608\ub97c \ub4e4\uc5b4 \uc2e4 \uc11c\ubc84\ub85c \ubcf4\ub0b4\uc9c0\ub294 request\ub97c \uc911\uac04\uc5d0\uc11c \uac00\ub85c\ucc44\uc5b4 \uc11c\ubc84\ub85c \ubcf4\ub0b4\uc9c0 \ub9d0\uace0 \ub300\uc2e0 cache \ub41c \ub370\uc774\ud130\ub97c \uc81c\uacf5\ud558\ub294 \ub4f1\uc758 \ucc98\ub9ac\ub97c \ud558\ub294 \uac83\uc774 \uac00\ub2a5\ud558\ub2e4."),(0,r.kt)("p",null,"http request\uac00 \uc788\uc744 \ub54c\ub9c8\ub2e4 fetch\uc774\ubca4\ud2b8\uac00 \ubc1c\uc0dd\ud558\ub294\ub370 service worker\ub294 fetch event listener\ub97c \ub4f1\ub85d\ud558\uc5ec \uc774\ubca4\ud2b8\ub97c \uac10\uc9c0\ud558\uace0 \uc788\ub2e4\uac00 fetch\uc774\ubca4\ud2b8\uac00 \ubc1c\uc0dd\ud560 \ub54c listener\uc5d0\uc11c request\ub97c intercept\ud558\ub294 \ubc29\uc2dd\uc774\ub2e4."),(0,r.kt)("h2",{id:"\uba54\uc2dc\uc9c0\ub97c-\ud1b5\ud55c-\uc11c\ube44\uc2a4-\uc6cc\ucee4\uc640-\ud398\uc774\uc9c0\uac04\uc758-\ucee4\ubba4\ub2c8\ucf00\uc774\uc158"},"\uba54\uc2dc\uc9c0\ub97c \ud1b5\ud55c \uc11c\ube44\uc2a4 \uc6cc\ucee4\uc640 \ud398\uc774\uc9c0\uac04\uc758 \ucee4\ubba4\ub2c8\ucf00\uc774\uc158"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc708\ub3c4\uc6b0\uc5d0\uc11c \ud574\ub2f9 \uc708\ub3c4\uc6b0\ub97c \uc81c\uc5b4\ud558\ub294 \uc11c\ube44\uc2a4 \uc6cc\ucee4\ub85c \uba54\uc2dc\uc9c0 \ubcf4\ub0b4\uae30"),(0,r.kt)("li",{parentName:"ul"},"\uc11c\ube44\uc2a4 \uc6cc\ucee4\uc5d0\uc11c \ubc94\uc704 \ub0b4\uc758 \ubaa8\ub4e0 \uc708\ub3c4\uc6b0\ub85c \uba54\uc2dc\uc9c0 \ubcf4\ub0b4\uae30"),(0,r.kt)("li",{parentName:"ul"},"\uc11c\ube44\uc2a4 \uc6cc\ucee4\uc5d0\uc11c \ud2b9\uc815 \uc708\ub3c4\uc6b0\ub85c \uba54\uc2dc\uc9c0 \ubcf4\ub0b4\uae30"),(0,r.kt)("li",{parentName:"ul"},"\uc708\ub3c4\uc6b0\uac04 \uba54\uc2dc\uc9c0 \ubcf4\ub0b4\uae30 (\uc11c\ube44\uc2a4 \uc6cc\ucee4\ub97c \ud1b5\ud574)")),(0,r.kt)("p",null,"\ud398\uc774\uc9c0\uc5d0\uc11c \uc11c\ube44\uc2a4\uc6cc\ucee4\ub97c \uac00\uc838\uc624\ub824\uba74 \ub2e4\uc74c\uacfc \uac19\uc774\ud55c\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"navigator.serviceWorker.controller\n")),(0,r.kt)("p",null,"\uadf8 \ud6c4\uc5d0\ub294 \uba54\uc2dc\uc9c0 \uc790\uccb4\ub97c \uccab\ubc88\uc9f8 \uc778\uc218\ub85c \ubc1b\ub294 \uc11c\ube44\uc2a4 \uc6cc\ucee4\uc758 ",(0,r.kt)("inlineCode",{parentName:"p"},"postMessage()")," \uba54\uc11c\ub4dc\ub97c \ud65c\uc6a9\ud55c\ub2e4.\uc774 \uba54\uc2dc\uc9c0\ub294 \ubb34\uc5c7\uc774\ub4e0 \ub420 \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,"\uba54\uc2dc\uc9c0\uac00 \uac8c\uc2dc\ub418\uace0 \ub098\uba74 \uc11c\ube44\uc2a4 \uc6cc\ucee4\ub294 message \uc774\ubca4\ud2b8\ub97c \uc218\uc2e0\ud558\uc5ec \ud574\ub2f9 \uba54\uc2dc\uc9c0\ub97c \ubc1b\uc744 \uc218 \uc788\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'self.addEventListener("message", function (event) {\n  console.log(event.data)\n})\n')),(0,r.kt)("p",null,"\uc704 \uc608\uc81c\ub294 \uba54\uc2dc\uc9c0\ub97c \ubc1b\uc544\uc11c \ucf58\uc194\uc5d0 \ucd9c\ub825\ud55c\ub2e4. \uba54\uc2dc\uc9c0\uc5d0 \ud3ec\ud568\ub41c \ucf58\ud150\uce20\ub294 \uc774\ubca4\ud2b8 \ub9ac\uc2a4\ub108\uc5d0 \uc804\ub2ec\ub41c \uc774\ubca4\ud2b8 \uac1d\uccb4\uc758 \ub370\uc774\ud130 \uc18d\uc131\uc5d0\uc11c \ucc3e\uc744 \uc218 \uc788\ub2e4.\n\uba54\uc2dc\uc9c0 \ub370\uc774\ud130 \uc790\uccb4\ub97c \ud3ec\ud568\ud558\ub294 \uac83 \uc774\uc678\uc5d0\ub3c4 \uc774\ubca4\ud2b8 \uac1d\uccb4\ub294 \uc5ec\ub7ec \uc720\uc6a9\ud55c \uc18d\uc131\uc744 \uac00\uc9c0\uace0 \uc788\ub2e4. \uac00\uc7a5 \uc720\uc6a9\ud55c \uc18d\uc131\uc911 \uc77c\ubd80\ub294 source \uc18d\uc131\uc5d0 \uc788\ub2e4."),(0,r.kt)("p",null,"source \uc18d\uc131\uc5d0\ub294 \uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0b8 \uc708\ub3c4\uc6b0 \uc815\ubcf4\uac00 \ub4e4\uc5b4\uc788\ub2e4. \uc774 \uc815\ubcf4\ub97c \ud65c\uc6a9\ud574\uc11c \ubb34\uc5c7\uc744 \ud560\uc9c0 \uadf8\ub9ac\uace0 \uc751\ub2f5\uc744 \uc5b4\ub514\ub85c \ubcf4\ub0bc\uc9c0 \ud310\ub2e8\ud560 \uc218 \uc788\ub2e4.\n\ub2e4\uc74c \ucf54\ub4dc\ub294 \uba54\uc2dc\uc9c0\uc758 source \uc18d\uc131\uc744 \uc0ac\uc6a9\ud558\ub294 \uac04\ub2e8\ud55c \uc608\uc81c \ucf54\ub4dc\uc774\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'self.addEventListener("message", function (event) {\n  console.log("Message received:", event.data)\n  console.log("From a window with the id:", event.source.id)\n  console.log("which is currently pointing at:", event.source.url)\n  console.log("and is", event.source.focused ? "focused" : "not focused")\n  console.log("and", event.source.visibilityState)\n})\n')),(0,r.kt)("p",null,"\ud398\uc774\uc9c0\uc5d0\uc11c \uc11c\ube44\uc2a4\uc6cc\ucee4\ub85c \ud574\ub2f9 \ud398\uc774\uc9c0\ub97c \uce90\uc2dc\ud558\ub77c\uace0 \uc694\uccad\uc744 \ubcf4\ub0b8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'navigator.serviceWorker.controller.postMessage("cache-current-page")\n')),(0,r.kt)("p",null,"\uc0ac\uc6a9\uc790\uac00 \ud574\ub2f9 \ud398\uc774\uc9c0\uc5d0 \ubc29\ubb38\ud558\uba74 \uc11c\ube44\uc2a4 \uc6cc\ucee4\uc5d0 \uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0c5\ub2c8\ub2e4. \uc11c\ube44\uc2a4 \uc6cc\ucee4\ub294 \uc774 \uba54\uc2dc\uc9c0\ub97c \uc218\uc2e0\ud558\uace0, \uc5b4\ub290 \ud398\uc774\uc9c0\ub97c \uce90\uc2f1\ud560\uc9c0 \uacb0\uc815\ud558\uae30 \uc704\ud574 \uc774\ubca4\ud2b8 source \uc18d\uc131\uc758 \uac12\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4."),(0,r.kt)("p",null,"\uc11c\ube44\uc2a4 \uc6cc\ucee4\uc5d0\uc11c \ud398\uc774\uc9c0\ub85c \uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0b4\ub294 \uac83\uc740 \ud398\uc774\uc9c0\uc5d0\uc11c \uc11c\ube44\uc2a4 \uc6cc\ucee4\ub85c \uba54\uc2dc\uc9c0\ub97c \uac8c\uc2dc\ud558\ub294 \uac83\uacfc \ube44\uc2b7\ud558\ub2e4. \uc720\uc77c\ud55c \ucc28\uc774\uc810\uc740 postMessage()\ub97c \ud638\ucd9c\ud558\ub294 \uac1d\uccb4\uc774\ub2e4. \uc9c0\uae08\uae4c\uc9c0 \uc11c\ube44\uc2a4 \uc6cc\ucee4\uc5d0\uc11c postMessage()\ub97c \ud638\ucd9c\ud588\ub2e4\uba74 \uc774\ubc88\uc5d0\ub294 \uc11c\ube44\uc2a4 \uc6cc\ucee4 \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \ud638\ucd9c\ud55c\ub2e4."),(0,r.kt)("p",null,"\uc11c\ube44\uc2a4 \uc6cc\ucee4\ub0b4\uc5d0\uc11c \uc11c\ube44\uc2a4 \uc6cc\ucee4\uc758 \uae00\ub85c\ubc8c \uac1d\uccb4\uc778 clients \uac1d\uccb4\ub97c \uc0ac\uc6a9\ud574 \ud604\uc7ac \uc11c\ube44\uc2a4 \uc6cc\ucee4 \ubc94\uc8fc\uc548\uc5d0 \uc5f4\ub824 \uc788\ub294 \ubaa8\ub4e0 \uc708\ub3c4\uc6b0(Window Clients)\ub97c \uac00\uc838\uc62c \uc218 \uc788\ub2e4. clients \uac1d\uccb4\ub294 matchAll \uba54\uc11c\ub4dc\ub97c \uac00\uc9c0\uace0 \uc788\ub2e4. \uc774 \uba54\uc11c\ub4dc\ub294 \uc11c\ube44\uc2a4\uc6cc\ucee4 \ubc94\uc8fc \ub0b4\uc5d0 \uc5f4\ub824 \uc788\ub294 \ubaa8\ub4e0 \uc708\ub3c4\uc6b0\ub97c \uac00\uc838\uc624\ub294\ub370 \uc0ac\uc6a9\ub41c\ub2e4. matchAll() \uba54\uc11c\ub4dc\ub294 0\uac1c \ud639\uc740 \uadf8 \uc774\uc0c1\uc758 WindowClient \uac1d\uccb4\ub97c \ub2f4\ub294 \ubc30\uc5f4\ub85c \ub9ac\uc878\ube0c\ub418\ub294 \ud504\ub85c\ubbf8\uc2a4\ub97c \ubc18\ud658\ud55c\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'self.clients.matchAll().then(function(clients) {\n  clients.forEach(function(client) {\n    if (client.url.includes("/my-account")) {\n      client.postMessage("Hi client: " + client.id;\n    }\n    })\n})\n')),(0,r.kt)("p",null,"\uc774 \ucf54\ub4dc\ub294 \ud604\uc7ac \uc11c\ube44\uc2a4 \uc6cc\ucee4\uac00 \uc81c\uc5b4\ud558\ub294 \ubaa8\ub4e0 \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \uac00\uc838\uc640 \ud558\ub098\uc529 \ub3cc\uba70 \ud398\uc774\uc9c0\ub97c \ud45c\uc2dc\ud558\uace0 \uc788\ub294 \uc708\ub3c4\uc6b0\ub85c \uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0b8\ub2e4.\n\uc774 \uba54\uc2dc\uc9c0\ub97c \uc708\ub3c4\uc6b0\uc5d0\uc11c \ubc1b\ub294 \ucf54\ub4dc\ub294 \uc544\ub798\uc640 \uac19\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'navigator.serviceWorker.addEventListener("message", function (event) {\n  console.log(event.data)\n})\n')),(0,r.kt)("p",null,"\uc11c\ube44\uc2a4 \uc6cc\ucee4\uac00 \uc124\uce58\ub418\uace0 \ud544\uc694\ud55c \ubaa8\ub4e0 \ub9ac\uc18c\uc2a4 \uce90\uc2f1\uc774 \ub05d\ub098\uba74 \uc571 \uc0ac\uc6a9\uc790\uc5d0\uac8c \uc628\ub77c\uc778\uc774\ub4e0 \uc624\ud504\ub77c\uc778\uc774\ub4e0 \uc0c1\uad00\uc5c6\uc774 \uc571\uc744 \uc0ac\uc6a9\ud560 \uc218 \uc788\ub2e4\uace0 \uc54c\ub824\uc57c\ud569\ub2c8\ub2e4."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"self.addEventListener('install', function() {\n  event.waitUntil (\n    caches.open(CACHE_NAME).then(function(cache) {\n      return cache.addAll(CACHED_URLS)\n    }).then(function() {\n      return self.clients.matchAll({\n        includeUncontrolled: true\n      })\n    }).then(function (clients) {\n      clients.forEach(client) {\n        client.postMessage('caching-complete')\n      }\n    })\n  )\n})\n")),(0,r.kt)("p",null,"\uc704 \ucf54\ub4dc\uc5d0\uc11c clients.matchAll()\ub97c \ud638\ucd9c\ud560 \ub54c \uc635\uc158 \uac1d\uccb4\ub97c \uc804\ub2ec\ud558\uc5ec \uc81c\uc5b4\ub418\uc9c0 \uc54a\ub294 \ud074\ub77c\uc774\uc5b8\ud2b8\ub3c4 \uacb0\uacfc\uc5d0 \ud3ec\ud568\ub418\ub3c4\ub85d \uc694\uccad\ud55c\ub2e4."),(0,r.kt)("p",null,"\uc0ac\uc6a9\uc790\uac00 \ud398\uc774\uc9c0\uc5d0 \ucc98\uc74c \ubc29\ubb38\ud558\uba74 \uc11c\ube44\uc2a4 \uc6cc\ucee4\uac00 \uc124\uce58\ub418\uace0 \ud65c\uc131\ud654\ub429\ub2c8\ub2e4. \ud558\uc9c0\ub9cc \ud398\uc774\uc9c0\ub294 \uc5ec\uc804\ud788 \uc11c\ube44\uc2a4 \uc6cc\ucee4\uc5d0\uc758\ud574 \uc81c\uc5b4\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.\n\ub9cc\uc77c self.clients.matchAll()\uc5d0 \uc81c\uc5b4\ub418\uc9c0 \uc54a\ub294 \uc708\ub3c4\uc6b0\ub97c \ud3ec\ud568\ud558\uc9c0 \uc54a\ub3c4\ub85d \uc54c\ub824\uc8fc\uc9c0 \uc54a\uc558\ub2e4\uba74 \uba54\uc2dc\uc9c0\ub294 \ubaa9\uc801\uc9c0\uc5d0 \ub3c4\ub2ec\ud558\uc9c0 \ubabb\ud560 \uac83 \uc785\ub2c8\ub2e4."),(0,r.kt)("h2",{id:"lifecycle"},"LifeCycle"),(0,r.kt)("p",null,"\uc11c\ube44\uc2a4 \uc6cc\ucee4\uc758 \ub77c\uc774\ud504\uc0ac\uc774\ud074\uc740 \ubcf5\uc7a1\ud558\ub2e4.",(0,r.kt)("br",{parentName:"p"}),"\n","\uc11c\ube44\uc2a4 \uc6cc\ucee4\uac00 \ubb34\uc5c7\uc744 \ud558\ub824\ub294\uc9c0, \uadf8\ub9ac\uace0 \uc5b4\ub5a4 \uadf8 \ub77c\uc774\ud504\uc0ac\uc774\ud074\uc774 \uc5b4\ub5a4 \uc774\uc810\uc774 \uc788\ub294\uc9c0 \ubaa8\ub978\ub2e4\uba74, \uc11c\ube44\uc2a4\uc6cc\ucee4\uc640 \uc2f8\uc6b0\uace0 \uc788\ub294 \uac83\ucc98\ub7fc \ub290\uaef4\uc9c8 \uc218 \uc788\ub2e4."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"But once you know how it works, you can deliver seamless, unobtrusive updates to users, mixing the best of web and native patterns.")),(0,r.kt)("p",null,"\uc11c\ube44\uc2a4 \uc6cc\ucee4 \ub77c\uc774\ud504 \uc0ac\uc774\ud074\uc758 \ubaa9\uc801\uc740 \ub2e4\uc74c\uacfc \uac19\ub2e4."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Make offline-first possible."),(0,r.kt)("li",{parentName:"ul"},"Allow a new service worker to get itself ready without disrupting the current one."),(0,r.kt)("li",{parentName:"ul"},"Ensure an in-scope page is controlled by the same service worker (or no service worker) throughout."),(0,r.kt)("li",{parentName:"ul"},"Ensure there's only one version of your site running at once.")),(0,r.kt)("p",null,"\ub77c\uc774\ud504 \uc0ac\uc774\ud074\uc758 \uae30\ubcf8\uc5d0 \ub300\ud574\uc11c \uc54c\uc544\ubcf4\uc790."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The install event is the first event a service worker gets, and it only happens once."),(0,r.kt)("li",{parentName:"ul"},"A promise passed to installEvent.waitUntil() signals the duration and success or failure of your install."),(0,r.kt)("li",{parentName:"ul"},'A service worker won\'t receive events like fetch and push until it successfully finishes installing and becomes "active".'),(0,r.kt)("li",{parentName:"ul"},"By default, a page's fetches won't go through a service worker unless the page request itself went through a service worker. So you'll need to refresh the page to see the effects of the service worker."),(0,r.kt)("li",{parentName:"ul"},"clients.claim() can override this default, and take control of non-controlled pages.")),(0,r.kt)("h3",{id:"install"},"Install"),(0,r.kt)("p",null,"The first event a service worker gets is install. It's triggered as soon as the worker executes, and it's only called once per service worker. If you alter your service worker script the browser considers it a different service worker, and it'll get its own install event."),(0,r.kt)("p",null,"The install event is your chance to cache everything you need before being able to control clients. The promise you pass to event.waitUntil() lets the browser know when your install completes, and if it was successful."),(0,r.kt)("p",null,"If your promise rejects, this signals the install failed, and the browser throws the service worker away. It'll never control clients."),(0,r.kt)("h3",{id:"activate"},"Activate"),(0,r.kt)("p",null,"Once your service worker is ready to control clients and handle functional events like push and sync, you'll get an activate event.",(0,r.kt)("br",{parentName:"p"}),"\n","But that doesn't mean the page that called .register() will be controlled."),(0,r.kt)("h3",{id:"clients-claim"},"clients claim"),(0,r.kt)("p",null,"You can take control of uncontrolled clients by calling clients.claim() within your service worker once it's activated."),(0,r.kt)("p",null,"If you use your service worker to load pages differently than they'd load via the network, clients.claim() can be troublesome, as your service worker ends up controlling some clients that loaded without it."),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Note: I see a lot of people including clients.claim() as boilerplate, but I rarely do so myself. It only really matters on the very first load, and due to progressive enhancement the page is usually working happily without service worker anyway.")),(0,r.kt)("h2",{id:"\ucc38\uace0"},"\ucc38\uace0"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://web.dev/service-worker-lifecycle/#scope_and_control"},"The service worker lifecycle"))))}p.isMDXComponent=!0}}]);